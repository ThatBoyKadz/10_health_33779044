<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Health Records</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <h1>My Health Records</h1>

    <p>
        Welcome, <%= first || '' %> <%= last || '' %>! | 
        <a href="<%= logoutUrl %>">Logout</a> | 
        <a href="<%= addUrl %>">Add New Record</a>
    </p>

    <!-- ðŸ” Search Bar -->
    <form method="GET" action="/health/search" style="margin-bottom: 20px;">
        <input 
            type="text" 
            name="q" 
            placeholder="Search weight, height, BP, HR..."
            style="padding: 5px; width: 250px;"
            required
        >
        <button type="submit" style="padding: 5px 10px;">Search</button>
    </form>

    <% if (message) { %>
        <p><%= message %></p>
    <% } %>

    <% if (records.length === 0) { %>
        <p>No health records yet.</p>
    <% } else { %>
        <table border="1" cellpadding="5">
            <tr>
                <th>Date</th>
                <th>Weight (kg)</th>
                <th>Height (cm)</th>
                <th>BMI</th>
                <th>Blood Pressure</th>
                <th>Heart Rate</th>
            </tr>
            <% records.forEach(record => { %>
                <tr>
                    <td><%= record.record_date.toISOString().split('T')[0] %></td>
                    <td><%= record.weight %></td>
                    <td><%= record.height %></td>
                    <td><%= record.bmi %></td>
                    <td><%= record.blood_pressure %></td>
                    <td><%= record.heart_rate %></td>
                </tr>
            <% }) %>
        </table>
    <% } %>
</body>
</html>
